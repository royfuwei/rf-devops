kind: Deployment

image:
  repository: ""
  tag: ""
  pullPolicy: IfNotPresent

service:
  port: 3000
containerPort: 3000

secretEnv: {}

secrets:
  existingSecretName: api-env
  useEnvFrom: true

ingress:
  enabled: true
  # 把 certManager 相關設定移到外面，不要混在 tls 數組裡
  certManager:
    enabled: true
    issuerType: cluster-issuer
    issuerName: letsencrypt-dns
    keepCertificate: false
  
  annotations:
    kubernetes.io/ingress.class: nginx # 建議補上這個
    nginx.ingress.kubernetes.io/proxy-body-size: '0'
    # ... 其餘 annotations
    cert-manager.io/cluster-issuer: letsencrypt-dns

  hosts:
    - host: rfjs.api.royfw.dev
      paths:
        - path: /
          pathType: Prefix

  # ✅ 修正這裡：改為數組格式
  tls:
    - secretName: rfjs-tls-secret
      hosts:
        - rfjs.api.royfw.dev
